fotoramaDefaults={width:"100%",height:"100%",ratio:16/9,allowfullscreen:"native",nav:"thumbs",click:!1,transition:"crossfade",keyboard:{space:!0,end:!0,home:!0,up:!0,down:!0}};let $fotorama=$(".fotorama").fotorama(),fotorama=$fotorama.data("fotorama"),allowedExt=[".jpeg",".jpg",".png",".gif"],aft=null,uname="",params="",dataCalled={val:!1,onChange:[],set:function(t){t!=this.val&&this.onChange.length&&this.onChange.forEach(e=>{e(t)}),this.val=t},get:function(){return this.val},setOnChange:function(t){this.onChange.push(t)}};function addSlides(t){$("a#home").show(),t=t.data,aft=t.after?t.after:"EOF";let e=[];t.children.length>0&&t.children.forEach(t=>{let a=(t=t.data).url.match(/\.\w{3,4}$/m);t.url&&a&&allowedExt.includes(a[0])&&e.push(t)}),e.length&&e.forEach(t=>{fotorama.push({img:t.url,thumb:t.preview&&t.preview.images[0].resolutions[0].url.replace(/\&amp;/g,"&"),caption:t.title})}),"EOF"==aft&&fotorama.push({html:'<div style="text-align: center;position: relative;top: 150px;"><h1>THE END<h1></div>'}),dataCalled.set(!1),e.length<3&&fetchSlides()}function fetchSlides(){"EOF"==aft||dataCalled.get()||(dataCalled.set(!0),fetch(`https://www.reddit.com/${uname}/.json?limit=15&after=${aft}${params}`).then(t=>{if(!t.ok)throw new Error(t.status);return t.json()}).then(t=>addSlides(t)).catch(t=>{alert(`Request failed: ${t}`)}))}function nameFixes(t){if("/"==(t=t.replace(/\s+/g,"")).substr(0,1)&&(t=t.substr(1)),"u/"==t.substr(0,2)&&(t="user/"+t.substr(2)),"user/"==t.substr(0,5)&&(t+="/submitted",params="&sort=new"),"m/"==t.substr(0,2)&&(t="user/"+t.substr(2)),t.indexOf("?")>0){let e=t.split("?");t=e[0],params+="&"+e[1]}return{name:t,title:ucfirst(t.substr(t.indexOf("/")+1))+" - "+document.title}}function ucfirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}dataCalled.setOnChange(function(t){t?$(".loader").show():$(".loader").hide()}),$(".fotorama").on("fotorama:showend",function(t,e,a){e.size-e.activeIndex<=5&&fetchSlides()}),$(document).ready(function(){if(location.hash.length>0){username=location.hash.substr(1);let t=nameFixes(username);document.title=t.title+" - "+document.title,uname=t.name,fetchSlides()}else swal.fire({title:"Enter Reddit name",text:"e.g. u/xyz or r/all",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!1,confirmButtonText:"Go",showLoaderOnConfirm:!0,preConfirm:t=>{location.hash="#"+t;let e=nameFixes(t);if(t=e.name,document.title=e.title+" - "+document.title,uname=t,t&&t.match(/user\/[\d\w]+|r\/[\d\w]+/g))return fetch(`https://www.reddit.com/${t}/.json?limit=15&after=${aft}${params}`).then(t=>{if(!t.ok)throw new Error(t.status);return t.json()}).catch(t=>{Swal.showValidationMessage(`Request failed: ${t}`)});t?Swal.showValidationMessage("Invalid format, please provide Reddit name as u/xyz or r/xyz"):Swal.showValidationMessage("Name field cannot be empty!")},allowOutsideClick:()=>0}).then(t=>{(t=t.value).error?Swal.showValidationMessage(`Request failed: ${t.message}`):t.data&&t.data.children&&t.data.children.length>0?addSlides(t):Swal.showValidationMessage("Request failed: No posts found for this user")});window.onhashchange=function(){location.reload()},$(document).on("click","div.fotorama__stage__frame img.fotorama__img",function(){let t=$(this).clone().removeClass().removeAttr("style");$("#imageZoomContent").html(t),this.height<this.width&&window.screen.width<window.screen.height&&($("#imageZoomContent img").addClass("rotated"),$("#imageZoomContent img").css("maxWidth","100vh")),panzoom($("#imageZoomContent")[0]),$("#imageZoom").modal("toggle")}),$(document).on("click","a#home",function(){window.location=location.href.substr(0,location.href.lastIndexOf("#"))})});